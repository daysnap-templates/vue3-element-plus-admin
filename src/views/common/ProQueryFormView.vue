<template>
  <ProQueryForm :metadata="metadata" @query="query = $event" />

  <ElButton @click="handleGetOptions">è·å–çˆ±å¥½é€‰é¡¹</ElButton>

  <dl style="padding: 16px 0">
    <dt>æœç´¢çš„å€¼ï¼š</dt>
    <dd>{{ query }}</dd>
    <dt>è¡¨å•é¡¹å€¼ï¼š</dt>
    <dd>{{ metadata }}</dd>
  </dl>
</template>

<script setup lang="ts">
  import { useQueryMetadata } from '@/hooks'

  const [query, metadata] = useQueryMetadata({
    x1: {
      is: 'form-input',
      value: '1',
      props: {},
    },
    x2: {
      is: 'form-select',
      value: '',
      options: [
        { label: 'ä¸€å¹´çº§', value: 1 },
        { label: 'äºŒå¹´çº§', value: 2 },
        { label: 'ä¸‰å¹´çº§', value: 3 },
      ],
    },
    x3: {
      is: 'form-radio',
      value: '',
      label: 'æ€§åˆ«ï¼š',
      options: [
        { label: 'å…¨éƒ¨', value: '' },
        { label: 'ç”·', value: 1 },
        { label: 'å¥³', value: 2 },
      ],
    },
    x4: {
      is: 'form-checkbox',
      value: [],
      label: 'çˆ±å¥½ï¼š',
      options: [
        { label: 'å”±', value: 1 },
        { label: 'è·³', value: 2 },
        { label: 'Rap', value: 3 },
        { label: 'ğŸ€', value: 4 },
      ],
    },
  })

  const handleGetOptions = async () => {
    return (metadata.x4.options = [
      { label: 'å”±', value: 1 },
      { label: 'è·³', value: 2 },
    ])
  }
</script>
